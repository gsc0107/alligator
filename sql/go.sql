drop schema GENEONTOLOGY RESTRICT;
create schema GENEONTOLOGY;
set schema GENEONTOLOGY;

drop INDEX GO_TERMIDX1;
drop INDEX GO_TERM2CHILDIDX1;
drop INDEX GO_TERM2CHILDIDX2;
drop INDEX GO_TERM2CHILDIDX3;
ALTER TABLE TERM2CHILD DROP CONSTRAINT GO_TERM2CHILD_FK1;
ALTER TABLE TERM2CHILD DROP CONSTRAINT GO_TERM2CHILD_FK2;


drop table TERM;
create table TERM
	(
	id INT not null primary key , --GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),  
	uri varchar(60) not null,
	content clob
	);

create UNIQUE index GO_TERMIDX1  ON TERM(uri);



drop table TERM2CHILD;
create table TERM2CHILD
	(
	id INT not null primary key, -- GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),  
	parent_id INT not null  ,
	child_id INT not null  ,
	CONSTRAINT GO_TERM2CHILD_FK1 FOREIGN KEY(parent_id) REFERENCES TERM(id),
	CONSTRAINT GO_TERM2CHILD_FK2 FOREIGN KEY(child_id) REFERENCES TERM(id)
	);
delete from TERM2CHILD;



create UNIQUE index GO_TERM2CHILDIDX1  ON TERM2CHILD(parent_id,child_id);
create index GO_TERM2CHILDIDX2  ON TERM2CHILD(parent_id);
create index GO_TERM2CHILDIDX3  ON TERM2CHILD(child_id);





